{"version":3,"sources":["scripts/main.js"],"names":["table","document","getElementsByTagName","countClick","createForm","form","querySelector","boxNotification","createElement","saveInfoINCell","evt","cell","target","closest","input","tBodies","contains","textContent","value","dataset","oldValue","remove","validAddEmployee","data","FormData","arrForm","Array","from","entries","i","length","emplyInput","notValidName","notValidAge","Number","style","display","top","width","lineHeight","className","rowEmployee","qa","insertAdjacentHTML","getStringTable","insertAdjacentElement","number","numberWithSeperator","toFixed","String","split","join","getNumber","str","sortTable","targetHeadline","arrTBody","rows","slice","sort","prevRow","currentRow","index","indexOf","call","parentNode","children","prev","cells","current","reverse","forEach","row","append","createNotification","height","borderRadius","textAlign","padding","position","left","backgroundColor","arrListSelect","select","option","addEventListener","tBodyRow","targetCell","targetRow","classList","add","canEditing","cellInput","focus","removeAttribute","activeElement","getElementsByClassName","code","preventDefault"],"mappings":"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","file":"main.d7ef9b0b.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.getElementsByTagName('table')[0];\nlet countClick = 0;\n\ncreateForm();\n\nconst form = document.querySelector('form');\nconst boxNotification = document.createElement('div');\n\ncreateNotification(boxNotification);\n\ntable.addEventListener('click', (evt) => {\n  const targetHeadline = evt.target.closest('th');\n  const tBodyRow = evt.target.closest('tr');\n  const targetCell = evt.target;\n  const targetRow = table.tBodies[0].contains(tBodyRow);\n\n  if (targetHeadline) {\n    sortTable(targetHeadline);\n  }\n\n  if (targetRow) {\n    if (table.querySelector('.active')) {\n      document.querySelector('.active').classList.remove('active');\n    }\n    tBodyRow.classList.add('active');\n\n    if (targetCell.dataset.canEditing === '0') {\n      const cellInput = document.createElement('input');\n\n      cellInput.dataset.oldValue = targetCell.textContent;\n      cellInput.classList.add('cell-input');\n      targetCell.textContent = '';\n      targetCell.insertAdjacentElement('afterbegin', cellInput);\n      cellInput.focus();\n      targetCell.removeAttribute('data-can-editing');\n\n      return;\n    }\n    targetCell.dataset.canEditing = '0';\n  }\n});\n\ntable.addEventListener('keydown', (evt) => {\n  const targetfocusInput\n    = document.activeElement === document\n      .getElementsByClassName('cell-input')[0];\n\n  if (targetfocusInput && evt.code === 'Enter') {\n    saveInfoINCell(evt);\n  }\n});\n\ntable.addEventListener('blur', (evt) => {\n  saveInfoINCell(evt);\n}, true);\n\nform.addEventListener('click', (evt) => {\n  boxNotification.style.display = 'none';\n  boxNotification.className = 'error';\n\n  evt.preventDefault();\n\n  if (evt.target.closest('button')) {\n    validAddEmployee();\n  }\n});\n\nfunction saveInfoINCell(evt) {\n  const cell = evt.target.closest('td');\n  const input = evt.target;\n\n  if (table.tBodies[0].contains(cell)) {\n    cell.textContent = evt.target.value;\n\n    if (input.value === '') {\n      cell.textContent = input.dataset.oldValue;\n    }\n    input.remove();\n  }\n};\n\nfunction validAddEmployee() {\n  const data = new FormData(form);\n  const arrForm = Array.from(data.entries());\n\n  for (let i = 0; i < arrForm.length; i++) {\n    const emplyInput = arrForm[i][1] === '';\n    const notValidName = arrForm[i][0] === 'name'\n      && arrForm[i][1].length < 4;\n    const notValidAge = (arrForm[i][0] === 'age'\n      && (Number(arrForm[i][1]) < 18\n      || Number(arrForm[i][1]) > 90));\n\n    switch (true) {\n      case emplyInput:\n        boxNotification.style.display = 'block';\n\n        boxNotification.textContent = `\n          All fields are required!\n        `;\n        boxNotification.style.top = `${6 + 32 * i}` + 'px';\n        boxNotification.style.width = 'max-content';\n        boxNotification.style.lineHeight = '50px';\n        boxNotification.className = 'error';\n\n        return;\n      case notValidName:\n        boxNotification.style.display = 'block';\n        boxNotification.style.lineHeight = '25px';\n        boxNotification.style.top = '6px';\n        boxNotification.style.width = '350px';\n        boxNotification.className = 'error';\n\n        boxNotification.textContent = `\n          Name value has less than 4 letters!\n          The first letter must be in upper case!\n        `;\n\n        return;\n      case notValidAge:\n        boxNotification.style.display = 'block';\n        boxNotification.style.top = '106px';\n        boxNotification.style.width = 'max-content';\n        boxNotification.style.lineHeight = '50px';\n        boxNotification.className = 'error';\n\n        boxNotification.textContent = `\n          Age value is less than 18 or more than 90!\n        `;\n\n        return;\n      default:\n        break;\n    }\n  }\n\n  const rowEmployee = document.createElement('tr');\n\n  rowEmployee.dataset.qa = arrForm[0][1];\n\n  rowEmployee.insertAdjacentHTML('afterbegin', `\n    <td>${arrForm[0][1]}</td>\n    <td>${arrForm[1][1]}</td>\n    <td>${arrForm[2][1]}</td>\n    <td>${arrForm[3][1]}</td>\n    <td>$${getStringTable(arrForm[4][1])}</td>\n  `);\n\n  table.tBodies[0]\n    .insertAdjacentElement('afterbegin', rowEmployee);\n  boxNotification.style.display = 'block';\n\n  boxNotification.textContent = `\n    Congratulations! Employee added!\n  `;\n  boxNotification.style.top = '188px';\n  boxNotification.className = 'success';\n};\n\nfunction getStringTable(number) {\n  const numberWithSeperator = (number / 1000).toFixed(3);\n\n  return String(numberWithSeperator).split('.').join(',');\n};\n\nfunction getNumber(str) {\n  return Number(str.split('$')[1].split(',').join(''));\n};\n\nfunction sortTable(targetHeadline) {\n  const arrTBody = Array.from(table.rows).slice(1, -1);\n\n  arrTBody.sort((prevRow, currentRow) => {\n    const index = [].indexOf\n      .call(targetHeadline.parentNode.children, targetHeadline);\n    const prev = prevRow.cells[index].textContent;\n    const current = currentRow.cells[index].textContent;\n\n    switch (index) {\n      case 3:\n        return Number(prev) - Number(current);\n      case 4:\n\n        return getNumber(prev) - getNumber(current);\n\n      default:\n        if (prev === current) {\n          return 0;\n        }\n\n        if (prev > current) {\n          return 1;\n        }\n\n        return -1;\n    }\n  });\n\n  if (countClick === 1) {\n    arrTBody.reverse().forEach(row => {\n      row.remove();\n      table.children[1].append(row);\n    });\n\n    countClick = 0;\n\n    return;\n  }\n\n  arrTBody.forEach(row => {\n    row.remove();\n    table.children[1].append(row);\n  });\n  countClick = 1;\n};\n\nfunction createNotification() {\n  boxNotification.dataset.qa = 'notification';\n  boxNotification.style.width = 'max-content';\n  boxNotification.style.height = '50px';\n  boxNotification.style.borderRadius = '25px';\n  boxNotification.style.lineHeight = '50px';\n  boxNotification.style.textAlign = 'center';\n  boxNotification.style.padding = '10px';\n  boxNotification.style.position = 'absolute';\n  boxNotification.style.left = '100%';\n  boxNotification.style.backgroundColor = '#fff';\n\n  document.getElementsByTagName('form')[0]\n    .insertAdjacentElement('afterbegin', boxNotification);\n\n  boxNotification.style.display = 'none';\n};\n\nfunction createForm() {\n  table.insertAdjacentHTML('afterend', `\n  <form class = \"new-employee-form\" method=\"GET\" action=\"/\">\n    <label>\n      Name:\n      <input name=\"name\" \n        type=\"text\" data-qa=\"name\"\n        required\n      >\n    </label>\n    <label>\n      Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\" required>\n    </label>\n    <label>\n    Office:\n      <select name=\"office\" type=\"text\" data-qa=\"office\"></select required>\n    </label>\n    <label>\n      Age: \n      <input name=\"age\" type=\"number\" data-qa=\"age\" required>\n    </label>\n    <label>\n      Salary: \n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n    </label>\n    <button type=\"submit\">\n      Save to table\n    </button>\n  </form>`);\n\n  const select = document.querySelector('select');\n  const arrListSelect = [\n    'Tokyo',\n    'Singapore',\n    'London',\n    'New York',\n    'Edinburgh',\n    'San Francisco',\n  ];\n\n  for (const option of arrListSelect) {\n    select.insertAdjacentHTML('afterbegin', `\n      <option>\n        ${option}\n      </option>`);\n  }\n};\n"]}